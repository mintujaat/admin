<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - BMU Dating Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* ===== Base ===== */
* {box-sizing:border-box; margin:0; padding:0;}
body {
  font-family:'Inter',sans-serif; 
  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
  color:#2d3748;
  min-height: 100vh;
}
.wrapper {display:flex; min-height:100vh;}

/* ===== Sidebar ===== */
.sidebar {
  width:260px; 
  background:#ffffff; 
  padding:25px 20px;
  display:flex; flex-direction:column; 
  box-shadow: 2px 0 10px rgba(0,0,0,0.05);
  transition:all 0.3s;
  z-index: 100;
}
.sidebar-header {
  padding-bottom: 25px;
  margin-bottom: 15px;
  border-bottom: 1px solid #e2e8f0;
}
.sidebar h2 {
  color:#2b6cb0; 
  font-size:1.5rem; 
  margin-bottom:5px;
  text-align:center;
  font-weight: 700;
}
.sidebar-subtitle {
  text-align: center;
  color: #718096;
  font-size: 0.85rem;
  margin-bottom: 10px;
}
.sidebar a {
  text-decoration:none; 
  color:#4a5568; 
  padding:12px 15px;
  border-radius:8px; 
  transition:0.2s all;
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 5px;
  font-weight: 500;
}
.sidebar a i {
  width: 20px;
  text-align: center;
  color: #718096;
}
.sidebar a:hover, .sidebar a.active {
  background:#edf2f7; 
  color:#2b6cb0;
}
.sidebar a:hover i, .sidebar a.active i {
  color: #2b6cb0;
}
.sidebar-toggle {
  display:none; 
  cursor:pointer; 
  font-size:1.5rem; 
  text-align:center; 
  margin-bottom:15px;
  padding: 10px;
  background: #2b6cb0;
  color: white;
  border-radius: 5px;
  width: fit-content;
}

/* ===== Main ===== */
.main-content {
  flex:1; 
  padding:30px 40px;
  overflow-y: auto;
}
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 1px solid #e2e8f0;
}
.page-header h1 {
  font-size: 1.8rem;
  color: #2d3748;
  font-weight: 700;
}
.user-info {
  display: flex;
  align-items: center;
  gap: 10px;
  background: white;
  padding: 8px 15px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.user-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  background: #2b6cb0;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}
section {
  background: white;
  border-radius: 12px;
  padding: 25px;
  margin-bottom: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  border: 1px solid #e2e8f0;
}
section h2 {
  color:#2d3748; 
  border-left:4px solid #2b6cb0;
  padding-left:12px; 
  margin-bottom:20px; 
  font-size:1.4rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
}
section h2 i {
  color: #2b6cb0;
}

/* ===== Forms ===== */
form {
  display:flex; 
  flex-direction:column; 
  gap:15px;
  background:#f7fafc; 
  padding:25px; 
  border-radius:12px;
  border: 1px solid #e2e8f0;
}
input, textarea {
  padding:12px 15px; 
  border-radius:8px; 
  border:1px solid #cbd5e0;
  background:#ffffff; 
  color:#2d3748; 
  outline:none; 
  transition:0.2s;
  font-family: 'Inter', sans-serif;
}
input:focus, textarea:focus {
  border-color:#2b6cb0; 
  box-shadow:0 0 0 3px rgba(43, 108, 176, 0.1);
}
button {
  padding:12px 20px; 
  border:none; 
  border-radius:8px; 
  background:#2b6cb0;
  color:#fff; 
  font-weight:600; 
  cursor:pointer; 
  transition:0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
button:hover {
  background:#2c5aa0; 
  transform:translateY(-2px);
  box-shadow: 0 4px 8px rgba(43, 108, 176, 0.2);
}

/* ===== Tables ===== */
.table-container {
  overflow-x: auto;
  margin-top: 20px;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}
table {
  width:100%; 
  border-collapse:collapse;
  background:white;
}
th, td {
  padding:15px; 
  border-bottom:1px solid #e2e8f0; 
  text-align:left;
}
th {
  color:#2d3748; 
  background:#f7fafc;
  font-weight: 600;
}
tbody tr:hover {
  background:rgba(43, 108, 176, 0.03);
}
.deleteBtn,.delete,.markRead {
  padding:8px 12px; 
  border:none; 
  border-radius:6px;
  font-weight: 500;
  cursor:pointer; 
  transition:0.2s;
  display: inline-flex;
  align-items: center;
  gap: 5px;
}
.delete {
  background:#e53e3e; 
  color:white;
}
.delete:hover {
  background:#c53030;
}
.markRead {
  background:#38a169; 
  color:white;
}
.markRead:hover {
  background:#2f855a;
}
.deleteBtn {
  background:#e53e3e; 
  color:white;
}
.deleteBtn:hover {
  background:#c53030;
}

/* ===== Stats Cards ===== */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 15px;
}
.stat-card {
  background:white; 
  padding:25px; 
  border-radius:12px;
  box-shadow:0 4px 6px rgba(0,0,0,0.05);
  text-align:center; 
  transition:0.3s;
  border: 1px solid #e2e8f0;
  position: relative;
  overflow: hidden;
}
.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: #2b6cb0;
}
.stat-card h3 {
  color:#718096; 
  font-size:0.95rem; 
  margin-bottom:10px;
  font-weight: 500;
}
.stat-card p {
  font-size:2rem; 
  font-weight:700; 
  color:#2d3748;
}
.stat-card:hover {
  transform:translateY(-5px);
  box-shadow: 0 10px 15px rgba(0,0,0,0.1);
}

/* ===== Responsive ===== */
@media(max-width:768px){
  .wrapper {
    flex-direction:column;
  }
  .sidebar {
    width:100%; 
    flex-direction:row; 
    justify-content:flex-start;
    padding:15px; 
    display:none;
    overflow-x: auto;
    flex-wrap: nowrap;
  }
  .sidebar.active {
    display:flex;
  }
  .sidebar-header {
    display: none;
  }
  .sidebar a {
    white-space: nowrap;
    margin-right: 10px;
    padding: 10px 15px;
  }
  .sidebar-toggle {
    display:block;
  }
  .main-content {
    padding:20px;
  }
  .page-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px;
  }
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  table, tbody, th, td, tr {
    display:block;
  }
  th {
    display:none;
  }
  td {
    padding:10px 0; 
    position:relative; 
    padding-left:50%;
    border-bottom: 1px solid #e2e8f0;
  }
  td::before {
    content:attr(data-label); 
    position:absolute; 
    left:10px; 
    font-weight:600; 
    color:#2b6cb0;
  }
}

/* Additional styling for better UX */
.recommended {
  cursor: pointer;
  font-size: 1.2rem;
}
.recommended.active {
  color: #ecc94b;
}
.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.form-group label {
  font-weight: 500;
  color: #4a5568;
}
.checkbox-group {
  display: flex;
  align-items: center;
  gap: 10px;
}
.checkbox-group input[type="checkbox"] {
  width: 18px;
  height: 18px;
}
</style>
</head>
<body>

<div class="wrapper">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>BMU TUFANI</h2>
      <div class="sidebar-subtitle">Admin Portal</div>
    </div>
    <a href="#stats" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
    <a href="#logo"><i class="fas fa-image"></i> Logo</a>
    <a href="#marquee"><i class="fas fa-scroll"></i> Marquee</a>
    <a href="#popup"><i class="fas fa-window-restore"></i> Popup</a>
    <a href="#posts"><i class="fas fa-newspaper"></i> Posts</a>
    <a href="#messages"><i class="fas fa-envelope"></i> Messages</a>
    <a href="#alerts"><i class="fas fa-bell"></i> Alerts</a>
    <a href="a.html"><i class="fas fa-poll"></i> Poll</a>
    <a href="mad.html"><i class="fas fa-comments"></i> Chatroom</a>
  </div>

  <!-- Main -->
  <div class="main-content">
    <div class="page-header">
      <h1>Admin Dashboard</h1>
      <div class="user-info">
        <div class="user-avatar">AD</div>
        <span>Admin User</span>
      </div>
    </div>
    <span class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i> Menu</span>

    <!-- Stats -->
    <section id="stats">
      <h2><i class="fas fa-chart-line"></i> Dashboard Overview</h2>
      <div class="stats-grid">
        <div class="stat-card" id="totalPosts"><h3>Total Posts</h3><p>0</p></div>
        <div class="stat-card" id="totalMessages"><h3>Total Messages</h3><p>0</p></div>
        <div class="stat-card" id="unreadMessages"><h3>Unread Messages</h3><p>0</p></div>
        <div class="stat-card" id="totalAlerts"><h3>Total Alerts</h3><p>0</p></div>
      </div>
    </section>

    <!-- Logo -->
    <section id="logo">
      <h2><i class="fas fa-image"></i> Update Site Logo</h2>
      <form id="logoForm">
        <div class="form-group">
          <label for="logoInput">Logo URL</label>
          <input type="text" id="logoInput" placeholder="Enter Logo URL">
        </div>
        <button type="submit"><i class="fas fa-upload"></i> Update Logo</button>
      </form>
    </section>

    <!-- Marquee -->
    <section id="marquee">
      <h2><i class="fas fa-scroll"></i> Update Site Marquee</h2>
      <form id="marqueeForm">
        <div class="form-group">
          <label for="marqueeInput">Marquee Text</label>
          <input type="text" id="marqueeInput" placeholder="Enter marquee text" required>
        </div>
        <button type="submit"><i class="fas fa-sync-alt"></i> Update Marquee</button>
      </form>
    </section>

    <!-- Popup -->
    <section id="popup">
      <h2><i class="fas fa-window-restore"></i> Update Popup Message</h2>
      <form id="popupForm">
        <div class="form-group">
          <label for="popupInput">Popup Message</label>
          <textarea id="popupInput" rows="4" placeholder="Enter popup message"></textarea>
        </div>
        <div class="form-group">
          <label for="popupImage">Image URL (optional)</label>
          <input type="text" id="popupImage" placeholder="Enter image URL">
        </div>
        <button type="submit"><i class="fas fa-save"></i> Update Popup</button>
      </form>
    </section>

    <!-- Posts -->
    <section id="posts">
      <h2><i class="fas fa-newspaper"></i> Add New Post</h2>
      <form id="postForm">
        <div class="form-group">
          <label for="title">Post Title</label>
          <input type="text" id="title" placeholder="Post Title" required>
        </div>
        <div class="form-group">
          <label for="content">Post Content</label>
          <textarea id="content" rows="5" placeholder="Post Content" required></textarea>
        </div>
        <div class="form-group">
          <label for="author">Author Name</label>
          <input type="text" id="author" placeholder="Author Name" required>
        </div>
        <div class="form-group">
          <label for="imageURL">Image URL (optional)</label>
          <input type="text" id="imageURL" placeholder="Image URL">
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="recommended">
          <label for="recommended">Recommended Post</label>
        </div>
        <button type="submit"><i class="fas fa-plus"></i> Add Post</button>
      </form>

      <h2 style="margin-top:30px;"><i class="fas fa-list"></i> All Posts</h2>
      <div class="table-container">
        <table>
          <thead><tr><th>Title</th><th>Author</th><th>Recommended</th><th>Actions</th></tr></thead>
          <tbody id="postsTable"></tbody>
        </table>
      </div>
    </section>

    <!-- Messages -->
    <section id="messages">
      <h2><i class="fas fa-envelope"></i> Messages</h2>
      <div class="table-container">
        <table>
          <thead><tr><th>Name</th><th>Email</th><th>Message</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody id="messagesTable"></tbody>
        </table>
      </div>
    </section>

    <!-- Alerts -->
    <section id="alerts">
      <h2><i class="fas fa-bell"></i> Alerts</h2>
      <form id="alertForm">
        <div class="form-group">
          <label for="alertTitle">Alert Title</label>
          <input type="text" id="alertTitle" placeholder="Alert Title" required>
        </div>
        <div class="form-group">
          <label for="alertMessage">Alert Message</label>
          <textarea id="alertMessage" rows="3" placeholder="Alert Message" required></textarea>
        </div>
        <button type="submit"><i class="fas fa-bell"></i> Add Alert</button>
      </form>

      <h2 style="margin-top:30px;"><i class="fas fa-list"></i> All Alerts</h2>
      <div class="table-container">
        <table>
          <thead><tr><th>Title</th><th>Message</th><th>Actions</th></tr></thead>
          <tbody id="alertsTable"></tbody>
        </table>
      </div>
    </section>
  </div>
</div>

<!-- Firebase & JS -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, doc, deleteDoc, updateDoc, query, orderBy, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA7pGe0YS6HrscAjwjJefgr9tAKO__UZkU",
  authDomain: "blog-2f57c.firebaseapp.com",
  projectId: "blog-2f57c",
  storageBucket: "blog-2f57c.appspot.com",
  messagingSenderId: "608339540577",
  appId: "1:608339540577:web:cd5323ea45e3a4b4dc4820",
  measurementId: "G-JEPHSB73V3"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ===== Sidebar Toggle ===== */
const sidebar = document.getElementById("sidebar");
document.getElementById("sidebarToggle").addEventListener("click", ()=>{ sidebar.classList.toggle("active"); });

/* ===== Logo ===== */
const logoForm=document.getElementById("logoForm"), logoInput=document.getElementById("logoInput");
async function loadLogo(){const s=await getDoc(doc(db,'settings','siteSettings')); if(s.exists()&&s.data().logoURL){logoInput.value=s.data().logoURL;}}
logoForm.addEventListener("submit",async e=>{e.preventDefault();await setDoc(doc(db,'settings','siteSettings'),{logoURL:logoInput.value},{merge:true});alert("Logo updated!");});
loadLogo();

/* ===== Marquee ===== */
const marqueeForm=document.getElementById("marqueeForm"), marqueeInput=document.getElementById("marqueeInput");
async function loadMarquee(){const s=await getDoc(doc(db,'settings','siteSettings')); if(s.exists()&&s.data().marqueeText){marqueeInput.value=s.data().marqueeText;}}
marqueeForm.addEventListener("submit",async e=>{e.preventDefault();await setDoc(doc(db,'settings','siteSettings'),{marqueeText:marqueeInput.value},{merge:true});alert("Marquee updated!");});
loadMarquee();

/* ===== Popup ===== */
const popupForm=document.getElementById("popupForm"), popupInput=document.getElementById("popupInput"), popupImage=document.getElementById("popupImage");
async function loadPopup(){const s=await getDoc(doc(db,'settings','popupMessage')); if(s.exists()){popupInput.value=s.data().text||""; popupImage.value=s.data().image||"";}}
popupForm.addEventListener("submit",async e=>{e.preventDefault();await setDoc(doc(db,'settings','popupMessage'),{text:popupInput.value,image:popupImage.value});alert("Popup updated!");});
loadPopup();

/* ===== Posts ===== */
const postForm=document.getElementById("postForm"), postsTable=document.getElementById("postsTable");
async function loadPosts(){
  postsTable.innerHTML=""; let count=0;
  const snap=await getDocs(query(collection(db,'blogs'),orderBy('createdAt','desc')));
  snap.forEach(d=>{count++; const p={...d.data(),id:d.id};
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${p.title}</td><td>${p.authorName}</td>
      <td class="recommended ${p.recommended?'active':''}" data-id="${p.id}">${p.recommended?'★':'☆'}</td>
      <td><button class="delete" data-id="${p.id}"><i class="fas fa-trash"></i> Delete</button></td>`;
    postsTable.appendChild(tr);
  });
  document.querySelector("#totalPosts p").textContent=count;
  document.querySelectorAll(".recommended").forEach(el=>{
    el.addEventListener("click",async()=>{await updateDoc(doc(db,'blogs',el.dataset.id),{recommended:!el.classList.contains('active')}); loadPosts();});
  });
  document.querySelectorAll(".delete").forEach(el=>{
    el.addEventListener("click",async()=>{if(confirm("Delete this post?")){await deleteDoc(doc(db,'blogs',el.dataset.id)); loadPosts();}});
  });
}
postForm.addEventListener("submit",async e=>{
  e.preventDefault();
  await addDoc(collection(db,'blogs'),{
    title:document.getElementById('title').value,
    content:document.getElementById('content').value,
    authorName:document.getElementById('author').value,
    imageURL:document.getElementById('imageURL').value,
    recommended:document.getElementById('recommended').checked,
    createdAt:new Date()
  });
  postForm.reset(); loadPosts();
});
loadPosts();

/* ===== Messages ===== */
const messagesTable=document.getElementById("messagesTable");
async function loadMessages(){
  messagesTable.innerHTML=""; let total=0, unread=0;
  const snap=await getDocs(collection(db,"messages"));
  snap.forEach(d=>{total++; const m=d.data(); if(!m.read) unread++;
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${m.name}</td><td>${m.email}</td><td>${m.message}</td>
      <td>${m.read?"Read":"Unread"}</td>
      <td><button class="markRead" data-id="${d.id}"><i class="fas fa-check"></i> Mark Read</button>
          <button class="deleteMsg" data-id="${d.id}"><i class="fas fa-trash"></i> Delete</button></td>`;
    messagesTable.appendChild(tr);
  });
  document.querySelector("#totalMessages p").textContent=total;
  document.querySelector("#unreadMessages p").textContent=unread;
  document.querySelectorAll(".markRead").forEach(b=>{b.addEventListener("click",async()=>{await updateDoc(doc(db,"messages",b.dataset.id),{read:true}); loadMessages();});});
  document.querySelectorAll(".deleteMsg").forEach(b=>{b.addEventListener("click",async()=>{if(confirm("Delete this message?")){await deleteDoc(doc(db,"messages",b.dataset.id)); loadMessages();}});});
}
loadMessages();

/* ===== Alerts ===== */
const alertForm=document.getElementById("alertForm"), alertsTable=document.getElementById("alertsTable");
async function loadAlerts(){
  alertsTable.innerHTML=""; let total=0;
  const snap=await getDocs(query(collection(db,"alerts"),orderBy("createdAt","desc")));
  snap.forEach(d=>{total++; const a=d.data();
    const tr=document.createElement("tr");
    tr.innerHTML=`<td data-label="Title">${a.title}</td>
      <td data-label="Message">${a.message}</td>
      <td data-label="Actions"><button class="deleteBtn" data-id="${d.id}"><i class="fas fa-trash"></i> Delete</button></td>`;
    alertsTable.appendChild(tr);
  });
  document.querySelector("#totalAlerts p").textContent=total;
  document.querySelectorAll(".deleteBtn").forEach(b=>{
    b.addEventListener("click",async()=>{if(confirm("Delete this alert?")){await deleteDoc(doc(db,"alerts",b.dataset.id)); loadAlerts();}});
  });
}
alertForm.addEventListener("submit",async e=>{
  e.preventDefault();
  await addDoc(collection(db,"alerts"),{
    title:document.getElementById("alertTitle").value,
    message:document.getElementById("alertMessage").value,
    createdAt:new Date()
  });
  alertForm.reset(); loadAlerts();
});
loadAlerts();
</script>
</body>
</html>